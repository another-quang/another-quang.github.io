{"version":3,"sources":["components/Globe/CircleLineGeometry.js","components/Globe/Pulse.js","components/Globe/MyGlobe.js","components/Globe/Globe.js","components/AthleteList/AthleteFilters.js","components/AthleteList/AthleteCard.js","components/AthleteList/AthleteDetailCard.js","components/AthleteList/AthleteList.js","components/App.js","containers/AppContainer.js","actions/index.js","constants/ActionTypes.js","serviceWorker.js","reducers/phaseResults.js","reducers/selectedResult.js","reducers/globeStatus.js","reducers/filterOptions.js","reducers/index.js","store/configureStore.js","index.js"],"names":["CircleLineGeometry","radius","segments","thetaStart","thetaLength","args","Math","PI","geometry","THREE","delta","i","angle","x","cos","y","sin","vertices","push","Pulse","color","duration","arguments","length","undefined","autoStart","call","this","lineColor","lineGeometry","lineMaterial","linewidth","transparent","opacity","line","add","start","prototype","Object","assign","create","constructor","started","Date","setSeconds","getSeconds","randFloat","stop","hide","material","update","t","floor","scale","set","MyGlobe","props","_this","classCallCheck","possibleConstructorReturn","getPrototypeOf","renderer","scene","container","camera","object","controls","fov","altitude","initialDistance","globeProps","globeRadius","widthSegments","heightSegments","globeGroup","circleGroup","markerObject","raycaster","mouse","state","spinning","prevProps","_this$props","phaseResults","selectedResult","globeStatus","updatePhaseResults","n_PhaseResultID","rotateCamera","geojson","lat","lng","viewDetails","zoomOut","highlightCircle","unHighlightCircle","_this2","_this$props2","setPOI","unsetPOI","document","getElementById","WIDTH","clientWidth","HEIGHT","clientHeight","setSize","position","lookAt","distanceTo","OrbitControls","autoRotate","autoRotateSpeed","background","appendChild","domElement","ambientLight","spotLight","load","texture","sphere","map","mesh","name","drag","window","addEventListener","event","mouseOffset","globeObject","getObjectByName","canvasWidth","innerWidth","clientX","clientY","innerHeight","setFromCamera","children","forEach","remove","intersects","intersectObject","setState","applyStatus","pointOfIntersection","point","addMarkerPOI","_this$calculateLatLng","calculateLatLngCoordinates","centerDistance","tangentDistance","render","requestAnimationFrame","circle","rotateZ","TWEEN","c","visible","poi","filtered","zoomFactor","target","calculate3dCoordinates","coeff","from","z","to","easing","Quartic","Out","onUpdate","copy","distanceToCenter","all","element","addCircle","spherical","setFromVector3","newPosition","setFromSpherical","circleMaterial","side","pie","center","medalColor","n_RankMedal","pulse","threeVector","radToDeg","phi","theta","parseInt","react_default","a","createElement","id","Component","Globe","setVisibleResults","onUnselectResult","Globe_MyGlobe","AthleteFilters","sport","gender","medal","sortby","onChange","bind","assertThisInitialized","onReset","setFilters","newFilterValues","value","resetValues","filterOptions","sportNames","key","genderNames","medalNames","className","htmlFor","type","onClick","AthleteCard","result","formattedDate","format","parse","d_PhaseDate","c_Person","concat","c_Team","e","preventDefault","c_EventGender","c_Sportname","c_CompetitionName","c_PhaseCity","c_PhaseCountry","AthleteDetailCard","c_Result","c_ResultType","n_PersonAgeYears","AthleteList","showFilters","showSort","toggleFilters","onSelectResult","filteredResults","poiResults","cardSource","athleteCards","r","components_AthleteList_AthleteCard","onClickAthleteCard","heading","cssClass","title","AthleteList_AthleteFilters","components_AthleteList_AthleteDetailCard","onCloseDetail","App","loaded","fetchGraceNoteData","components_Globe_Globe","components_AthleteList_AthleteList","AppContainer","connect","dispatch","fetch","then","response","json","results","slice","cities","find","countries","Country","receiveGraceNoteData","Boolean","location","hostname","match","initialState","action","copyState","b","distance","sqrt","filter","sort","ignoreSportName","ignoreGender","ignoreMedal","ignoreName","toUpperCase","includes","getAvailableFields","fieldName","temp","array","toConsumableArray","Set","unshift","rootReducer","combineReducers","middlewares","thunk","promise","store","createStore","applyMiddleware","apply","es","containers_AppContainer","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.a49dbd5b.chunk.js","sourcesContent":["import * as THREE from 'three'\n\nexport default function CircleLineGeometry(radius, segments, thetaStart, thetaLength) {\n  const args = {\n    radius: radius || 50,\n    segments: segments || 8,\n    thetaStart: thetaStart || 0,\n    thetaLength: thetaLength || (2 * Math.PI),\n  };\n  const geometry = new THREE.Geometry();\n  const delta = ((args.thetaStart + args.thetaLength) - args.thetaStart) / args.segments;\n  for (let i = 0; i <= args.segments; i += 1) {\n    const angle = args.thetaStart + (delta * i);\n    const x = args.radius * Math.cos(angle);\n    const y = args.radius * Math.sin(angle);\n    geometry.vertices.push(new THREE.Vector3(x, y, 0));\n  }\n  return geometry;\n}\n","import * as THREE from 'three'\nimport CircleLineGeometry from './CircleLineGeometry'\n\nexport default function Pulse(radius, color, duration = 5000, autoStart = true) {\n  THREE.Object3D.call(this);\n\n  this.duration = duration;\n  const segments = 32;\n  // const discColor = color;\n  const lineColor = color;\n\n  // const discGeometry = new THREE.CircleGeometry(radius, segments);\n  // const discMaterial = new THREE.MeshLambertMaterial({\n  //   side: THREE.DoubleSide,\n  //   color: discColor,\n  //   transparent: true,\n  //   opacity: 1,\n  // });\n  // this.disc = new THREE.Mesh(discGeometry, discMaterial);\n  // this.add(this.disc);\n\n  const lineGeometry = new CircleLineGeometry(radius, segments);\n  const lineMaterial = new THREE.LineBasicMaterial({\n    color: lineColor,\n    linewidth: 1,\n    transparent: true,\n    opacity: 1,\n  });\n  this.line = new THREE.Line(lineGeometry, lineMaterial);\n  this.add(this.line);\n\n  if (autoStart) {\n    this.start();\n  }\n}\n\nPulse.prototype = Object.assign(Object.create(THREE.Object3D.prototype), {\n\n  constructor: Pulse,\n\n  start() {\n    this.started = new Date()\n    // Adding random starting time\n    this.started.setSeconds(this.started.getSeconds() + THREE.Math.randFloat(-1,1));\n  },\n\n  stop() {\n    this.started = null;\n  },\n\n  hide() {\n    this.line.material.opacity = 0\n    // this.disc.material.opacity = 0\n  },\n\n  update() {\n    if (!this.started) {\n      return;\n    }\n    const now = new Date();\n    let t = (now - this.started) / this.duration;\n    if (t >= 1) {\n      t -= Math.floor(t);\n    }\n\n    const opacity = 1 - t*t*t*t;\n\n    let scale = t <= 0 ? 0.001 : t\n\n    // I was getting an error:\n    //  Matrix3.getInverse(): can't invert matrix, determinant is 0\n    //\n    // From SO:\n    //  Matrix3.getInverse(): can't invert matrix, determinant is 0\n    //  usually happens when either the scale.x, scale.y or scale.z are 0.\n    //  Make sure you're not scaling the object to 0.\n    //\n    // Ref:\n    //  http://stackoverflow.com/questions/19150120/scaling-an-object-in-three-js\n\n    this.scale.set(scale, scale, scale);\n    this.line.material.opacity = opacity;\n    // this.disc.material.opacity = opacity * 0.5;\n  },\n\n});","import React, { Component } from 'react';\nimport * as THREE from 'three'\nimport * as TWEEN from '@tweenjs/tween.js'\nimport OrbitControls from 'threejs-orbit-controls'\nimport Pulse from './Pulse'\n\nclass MyGlobe extends Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.renderer = new THREE.WebGLRenderer()\n\t\tthis.scene = new THREE.Scene()\n\t\tthis.container = null\n\t\tthis.camera = {\n\t\t\tobject: null, // camera object\n\t\t\tcontrols: null, // orbitControls object\n\t\t\tfov: 60,\n\t\t\taltitude: 400,\n\t\t\tinitialDistance: 0\n\t\t}\n\n\t\tthis.globeProps = {\n\t\t\tglobeRadius: 200,\n\t\t\twidthSegments: 50,\n\t\t\theightSegments: 50\n\t\t}\n\n\t\tthis.globeGroup = new THREE.Group()\n\t\tthis.circleGroup = new THREE.Group()\n\t\tthis.markerObject = new THREE.Object3D()\n\n\t\tthis.raycaster = new THREE.Raycaster()\n\t\tthis.mouse = new THREE.Vector2()\n\n\t\tthis.state = {\n\t\t\tspinning: true\n\t\t}\n\t}\n\n\tcomponentDidUpdate(prevProps) {\n\t\tconst { phaseResults, selectedResult, globeStatus } = this.props\n\n\t\tthis.updatePhaseResults(phaseResults)\n\n\t\tif (prevProps.selectedResult !== undefined) {\n\t\t\tif (selectedResult.n_PhaseResultID !== prevProps.selectedResult.n_PhaseResultID) {\n\t\t\t\tthis.rotateCamera(selectedResult.geojson.lat, selectedResult.geojson.lng, 1.4)\n\t\t\t}\n\t\t}\n\n\t\tif (prevProps.globeStatus.viewDetails === true && globeStatus.viewDetails === false) {\n\t\t\tthis.zoomOut()\n\t\t}\n\n\n\t\tif (globeStatus.viewDetails === true) {\n\t\t\tthis.highlightCircle(selectedResult)\n\t\t} else {\n\t\t\tthis.unHighlightCircle(phaseResults)\n\t\t}\n\t}\n\n\tcomponentDidMount() {\n\t\tconst { setPOI, unsetPOI } = this.props\n\t\tconst _this = this\n\t\tthis.container = document.getElementById('my-globe')\n\t\tconst WIDTH = this.container.clientWidth\n\t\tconst HEIGHT = this.container.clientHeight\n\n\t\t/** Renderer */\n\t\tthis.renderer.setSize(WIDTH, HEIGHT)\n\n\t\t/** Camera */\n\t\tthis.camera.object = new THREE.PerspectiveCamera(this.camera.fov, WIDTH / HEIGHT, 1, 10000)\n\t\tthis.camera.object.position.set(0, 200, this.camera.altitude)\n\t\tthis.camera.object.lookAt(new THREE.Vector3(0, 0, 0))\n\t\tthis.camera.initialDistance = this.camera.object.position.distanceTo(new THREE.Vector3(0,0,0))\n\t\tthis.camera.controls = new OrbitControls(this.camera.object, this.container)\n\t\tthis.camera.controls.autoRotate = this.state.spinning\n\t\tthis.camera.controls.autoRotateSpeed = .5\n\n\t\t/** Scene */\n\t\tthis.scene.background = new THREE.Color( 0x000 )\n\t\tthis.scene.add(this.camera.object)\n\t\tthis.container.appendChild(this.renderer.domElement)\n\n\t\t/** Lighting */\n\t\tconst ambientLight = new THREE.AmbientLight(0x404040)\n\t\tthis.scene.add(ambientLight)\n\t\tconst spotLight = new THREE.PointLight(0xffffff);\n\t\tspotLight.position.set(500, 500, 500);\n\t\tthis.camera.object.add(spotLight);\n\n\t\t/** Objects in scene */\n\t\tconst loader = new THREE.TextureLoader()\n\t\tloader.load( 'https://another-quang.github.io/build/assets/day_2048.jpg', texture => {\n\t\t\tconst sphere = new THREE.SphereGeometry(this.globeProps.globeRadius, this.globeProps.widthSegments, this.globeProps.heightSegments)\n\t\t\tconst material = new THREE.MeshLambertMaterial({\n\t\t\t\tmap: texture,\n\t\t\t\t// color: 0xffffff,\n\t\t\t\t// wireframe: true\n\t\t\t})\n\t\t\tconst mesh = new THREE.Mesh(sphere, material)\n\t\t\tmesh.name = 'globe'\n\t\t\tthis.globeGroup.add(mesh)\n\t\t})\n\t\tthis.scene.add(this.globeGroup)\n\t\tthis.scene.add(this.circleGroup)\n\t\tthis.scene.add(this.markerObject)\n\t\t// this.globeGroup.add(new THREE.AxesHelper(1000))\n\t\t// this.globeGroup.add(new THREE.GridHelper(1000, 10, 0x0000ff, 0x808080))\n\n\t\t/** Mouse interaction */\n\t\tlet drag = false\n\t\twindow.addEventListener('mousedown', () => drag = false)\n\t\twindow.addEventListener('mousemove', () => drag = true)\n\t\twindow.addEventListener('mouseup', (event) => {\n\t\t\tif (drag === false) {\n\t\t\t\tconst mouseOffset = document.getElementById('athlete-list')\n\t\t\t\tconst globeObject = _this.globeGroup.getObjectByName('globe')\n\t\t\t\tconst canvasWidth = window.innerWidth - mouseOffset.clientWidth\n\t\t\t\tif (event.clientX < canvasWidth) {\n\t\t\t\t\t_this.mouse.x = (event.clientX / canvasWidth) * 2 - 1\n\t\t\t\t\t_this.mouse.y = -(event.clientY / window.innerHeight) * 2 + 1\n\t\t\t\t\t_this.raycaster.setFromCamera(_this.mouse, _this.camera.object)\n\t\t\t\t\t_this.markerObject.children.forEach(x => _this.markerObject.remove(x))\n\n\t\t\t\t\twhile(_this.markerObject.children.length > 0) {\n\t\t\t\t\t\t_this.markerObject.remove(_this.markerObject.children[0])\n\t\t\t\t\t}\n\n\t\t\t\t\tconst intersects = _this.raycaster.intersectObject(globeObject)\n\t\t\t\t\tif (intersects.length === 0) {\n\t\t\t\t\t\t_this.zoomOut()\n\t\t\t\t\t\tunsetPOI()\n\t\t\t\t\t\treturn _this.setState({ spinning: true }, () => _this.applyStatus())\n\t\t\t\t\t}\n\t\t\t\t\tconst pointOfIntersection = intersects[0].point\n\t\t\t\t\t_this.addMarkerPOI(pointOfIntersection)\n\t\t\t\t\tconst { lat, lng } = _this.calculateLatLngCoordinates(pointOfIntersection)\n\t\t\t\t\t_this.rotateCamera(lat, lng, 1.2)\n\t\t\t\t\tsetPOI(lat, lng)\n\t\t\t\t}\n\t\t\t}\n\t\t})\n\n\t\tconst centerDistance = this.camera.object.position.distanceTo(new THREE.Vector3(0, 0, 0))\n\t\tconst tangentDistance = Math.cos(Math.PI / 180 * this.camera.fov / 2) * centerDistance\n\n\t\t/** Animation */\n\t\tfunction render () {\n\t\t\trequestAnimationFrame(render)\n\t\t\t_this.circleGroup.children.forEach(circle => {\n\t\t\t\tif (_this.camera.object.position.distanceTo(circle.position) < tangentDistance) {\n\t\t\t\t\tcircle.update()\n\t\t\t\t} else {\n\t\t\t\t\tcircle.hide()\n\t\t\t\t}\n\t\t\t})\n\t\t\t_this.markerObject.rotateZ(Math.PI / 100)\n\t\t\tTWEEN.update()\n\t\t\t_this.camera.controls.update()\n\t\t\t_this.renderer.render(_this.scene, _this.camera.object)\n\t\t}\n\n\t\trender()\n\t}\n\n\tapplyStatus() {\n\t\tthis.camera.controls.autoRotate = this.state.spinning\n\t}\n\n\thighlightCircle(selectedResult) {\n\t\tconst circle = this.circleGroup.getObjectByName(selectedResult.n_PhaseResultID)\n\t\tif (typeof(circle) !== 'undefined') {\n\t\t\tthis.circleGroup.children.forEach(c => c.visible = false)\n\t\t\tcircle.visible = true\n\t\t}\n\t}\n\n\tunHighlightCircle(phaseResults) {\n\t\tconst _this = this\n\t\tconst visibleResults = phaseResults.poi.length > 0 ? phaseResults.poi : phaseResults.filtered\n\t\tvisibleResults.forEach(x => _this.circleGroup.getObjectByName(x.n_PhaseResultID).visible = true)\n\t}\n\n\trotateCamera(lat, lng, zoomFactor = 1) {\n\t\tconst _this = this\n\t\tthis.setState({ spinning: false }, () => _this.applyStatus())\n\n\n\t\tconst target = this.calculate3dCoordinates(lat, lng, this.globeProps.globeRadius)\n\n\t\tconst coeff = this.camera.altitude / this.globeProps.globeRadius / zoomFactor\n\t\tlet from = {\n\t\t\tx: this.camera.object.position.x,\n\t\t\ty: this.camera.object.position.y,\n\t\t\tz: this.camera.object.position.z\n\t\t}\n\n\t\tconst to = {\n\t\t\tx: target.x * coeff,\n\t\t\ty: target.y * coeff,\n\t\t\tz: target.z * coeff\n\t\t}\n\n\t\treturn new TWEEN.Tween(from)\n\t\t\t.to(to, 2000)\n\t\t\t.easing(TWEEN.Easing.Quartic.Out)\n\t\t\t.onUpdate(() => {\n\t\t\t\t_this.camera.object.position.copy(from);\n\t\t\t\t_this.camera.object.lookAt(new THREE.Vector3(0, 0, 0));\n\t\t\t})\n\t\t\t.start()\n\t}\n\n\tzoomOut() {\n\t\tconst _this = this\n\t\tconst distanceToCenter = this.camera.object.position.distanceTo(new THREE.Vector3(0, 0, 0))\n\t\tconst coeff = this.camera.initialDistance / distanceToCenter\n\n\t\tlet from = {\n\t\t\tx: this.camera.object.position.x,\n\t\t\ty: this.camera.object.position.y,\n\t\t\tz: this.camera.object.position.z\n\t\t}\n\n\t\tconst to = {\n\t\t\tx: this.camera.object.position.x * coeff,\n\t\t\ty: this.camera.object.position.y * coeff,\n\t\t\tz: this.camera.object.position.z * coeff\n\t\t}\n\n\t\treturn new TWEEN.Tween(from)\n\t\t\t.to(to, 2000)\n\t\t\t.easing(TWEEN.Easing.Quartic.Out)\n\t\t\t.onUpdate(() => {\n\t\t\t\t_this.camera.object.position.copy(from);\n\t\t\t\t_this.camera.object.lookAt(new THREE.Vector3(0, 0, 0));\n\t\t\t})\n\t\t\t.start()\n\t}\n\n\tupdatePhaseResults(phaseResults) {\n\t\tvar _this = this\n\t\tif (_this.circleGroup.children.length === 0) {\n\t\t\t// Draw all circles\n\t\t\tphaseResults.all.forEach(element => {\n\t\t\t\tif (element.geojson !== undefined) {\n\t\t\t\t\t_this.addCircle(element)\n\t\t\t\t}\n\t\t\t})\n\t\t} else {\n\t\t\t// Hide all circles and show only what's filtered or poi'ed\n\t\t\tthis.circleGroup.children.forEach(x => x.visible = false)\n\t\t\tconst visibleResults = phaseResults.poi.length > 0 ? phaseResults.poi : phaseResults.filtered\n\t\t\tvisibleResults.forEach(x => _this.circleGroup.getObjectByName(x.n_PhaseResultID).visible = true)\n\t\t}\n\t}\n\n\taddMarkerPOI(position) {\n\t\tconst spherical = new THREE.Spherical()\n\t\tspherical.setFromVector3(position)\n\t\tspherical.radius += .2\n\n\t\tconst newPosition = new THREE.Vector3()\n\t\tnewPosition.setFromSpherical(spherical)\n\n\t\tconst distanceThreshold = 20\n\t\tconst circleMaterial = new THREE.MeshBasicMaterial({\n\t\t\tside: THREE.DoubleSide,\n\t\t\tcolor: 0x9cff57,\n\t\t\topacity: 0.5,\n\t\t\ttransparent: true\n\t\t})\n\t\tconst point = new THREE.Mesh(new THREE.CircleGeometry(0.5, 32), circleMaterial)\n\t\tthis.markerObject.add(point)\n\n\t\tconst pie = new THREE.Mesh(new THREE.CircleGeometry(distanceThreshold, 32, 0, Math.PI / 10), circleMaterial)\n\t\tthis.markerObject.add(pie)\n\n\t\t// Set poistion and face for marker\n\t\tthis.markerObject.position.copy(newPosition)\n\t\tthis.markerObject.lookAt(new THREE.Vector3(0 ,0, 0))\n\t}\n\n\taddCircle(element) {\n\t\tconst center = this.calculate3dCoordinates(element.geojson.lat + THREE.Math.randFloat(-2, 2), element.geojson.lng + THREE.Math.randFloat(-2, 2), this.globeProps.globeRadius)\n\t\tconst medalColor = element.n_RankMedal === 1 ? 0xffff00 : (element.n_RankMedal === 2 ? 0xC0C0C0 : 0xCD7F32)\n\t\tconst radius = THREE.Math.randFloat(5, 10)\n\t\tlet pulse = new Pulse(radius, medalColor)\n\t\tpulse.name = element.n_PhaseResultID\n\t\tpulse.position.copy(center)\n\t\tpulse.lookAt(new THREE.Vector3(0, 0, 0))\n\t\tthis.circleGroup.add(pulse)\n\t}\n\n\tcalculateLatLngCoordinates(threeVector) {\n\t\tconst spherical = new THREE.Spherical()\n\t\tspherical.setFromVector3(threeVector)\n\t\tconst lat = THREE.Math.radToDeg(Math.PI / 2 - spherical.phi)\n\t\tlet lng = THREE.Math.radToDeg(spherical.theta - Math.PI / 2)\n\t\tlng = lng < -180 ? lng + 360 : lng\n\t\treturn {lat, lng}\n\t}\n\n\tcalculate3dCoordinates(lat, lng, radius) {\n\t\tconst phi   = (90 - parseInt(lat, 10)) * (Math.PI / 180)\n\t\tconst theta = (parseInt(lng, 10) + 180) * (Math.PI / 180)\n\t\tconst x = -((radius) * Math.sin(phi) * Math.cos(theta))\n\t\tconst z = ((radius) * Math.sin(phi) * Math.sin(theta))\n\t\tconst y = ((radius) * Math.cos(phi))\n\n\t\treturn new THREE.Vector3(x, y, z)\n\t}\n\n\trender() {\n\t\treturn ( <div id=\"my-globe\"></div> );\n\t}\n}\n\nexport default MyGlobe;\n","import React, { Component } from 'react'\nimport MyGlobe from './MyGlobe'\nimport './Globe.scss'\n\nclass Globe extends Component {\n  render() {\n    const {phaseResults, selectedResult, globeStatus, setVisibleResults, setPOI, unsetPOI,onUnselectResult} = this.props\n    return (\n      <MyGlobe\n        phaseResults={phaseResults}\n        selectedResult={selectedResult}\n        globeStatus={globeStatus}\n        setVisibleResults={setVisibleResults}\n        setPOI={setPOI}\n        unsetPOI={unsetPOI}\n        onUnselectResult={onUnselectResult}\n        />\n    );\n  }\n}\n\nexport default Globe;","import React, { Component } from 'react'\n\nclass AthleteFilters extends Component {\n  constructor(props) {\n    super(props)\n    this.state = {\n      sport: '',\n      gender: '',\n      medal: '',\n      name: '',\n      sortby: ''\n    }\n\n    this.onChange = this.onChange.bind(this)\n    this.onReset = this.onReset.bind(this)\n  }\n\n  onChange() {\n    const { setFilters } = this.props\n\n    const newFilterValues = {\n      sport:  document.getElementById(\"sport-name\").value,\n      gender: document.getElementById(\"sport-gender\").value,\n      medal: document.getElementById(\"sport-medal\").value,\n      name: document.getElementById(\"athlete-name\").value\n    }\n\n    return this.setState({\n      sport: newFilterValues.sport,\n      gender: newFilterValues.gender,\n      medal: newFilterValues.medal,\n      name: newFilterValues.name,\n    }, setFilters(newFilterValues))\n  }\n\n  onReset() {\n    const { setFilters } = this.props\n    const resetValues = {\n      sport: 'All',\n      gender: 'All',\n      medal: 'All',\n      name: ''\n    }\n    return this.setState({\n      sport: resetValues.sport,\n      gender: resetValues.gender,\n      medal: resetValues.medal,\n      name: resetValues.name\n    }, setFilters(resetValues))\n  }\n\n  render() {\n    const { filterOptions } = this.props\n    const sportNames = filterOptions.sport.map(x => (<option key={x} value={x}>{x}</option>))\n    const genderNames = filterOptions.gender.map(x => (<option key={x} value={x}>{x}</option>))\n    const medalNames = filterOptions.medal.map(x => (<option key={x} value={x}>{x}</option>))\n    return (\n      <div>\n        <div className=\"form-row\">\n          <div className=\"col-6\">\n            <div className=\"form-group\">\n              <label htmlFor=\"sport-name\">Sport</label>\n              <select id=\"sport-name\" value={this.state.sport} className=\"form-control\" onChange={this.onChange}>\n                {sportNames}\n              </select>\n            </div>\n          </div>\n          <div className=\"col-3\">\n            <div className=\"form-group\">\n              <label htmlFor=\"sport-gender\">Gender</label>\n              <select id=\"sport-gender\" value={this.state.gender} className=\"form-control\" onChange={this.onChange}>\n                {genderNames}\n              </select>\n            </div>\n          </div>\n          <div className=\"col-3\">\n            <div className=\"form-group\">\n              <label htmlFor=\"sport-medal\">Medal</label>\n              <select id=\"sport-medal\" value={this.state.medal} className=\"form-control\" onChange={this.onChange}>\n                {medalNames}\n              </select>\n            </div>\n          </div>\n        </div>\n        <div className=\"form-row\">\n          <div className=\"col-9\">\n            <div className=\"form-group\">\n              <label htmlFor=\"athlete-name\">Athelete name</label>\n              <input id=\"athlete-name\" value={this.state.name} type=\"text\" className=\"form-control\" onChange={this.onChange} />\n            </div>\n          </div>\n          <div className=\"col-3\">\n            <div className=\"form-group\">\n              <label htmlFor=\"sort-by\">Sort by</label>\n              <select id=\"sort-by\" value={this.state.sortby} className=\"form-control\" onChange={this.onChange}>\n                <option value=\"time-desc\">Newest first</option>\n                <option value=\"time-asc\">Oldest first</option>\n                <option value=\"name-asc\">Name (A-Z)</option>\n                <option value=\"name-desc\">Name (Z-A)</option>\n              </select>\n            </div>\n          </div>\n        </div>\n\n        <div className=\"form-group\">\n          <button className=\"btn btn-light\" onClick={this.onReset}>Reset filters</button>\n        </div>\n      </div>\n     )\n  }\n}\n\nexport default AthleteFilters","import React, { Component } from 'react'\nimport {format, parse} from 'date-fns'\nimport './AthleteCard.scss'\n\nclass AthleteCard extends Component {\n  render() {\n    const { result, onClick } = this.props\n    const formattedDate = format(parse(result.d_PhaseDate), 'D MMMM YYYY')\n    const name = result.c_Person === null ? `Team ${result.c_Team}` : result.c_Person\n    const medal = result.n_RankMedal === 1 ? \"🥇\" : (result.n_RankMedal === 2 ? \"🥈\" : (result.n_RankMedal === 3 ? \"🥉\" : result.n_RankMedal))\n    // const lng = result.geojson ? result.geojson.lng : \"\"\n    // const lat = result.geojson ? result.geojson.lat : \"\"\n    return (\n      <div className=\"athlete--card media rounded mb-3 p-2 pb-0\" onClick={e => {e.preventDefault();onClick();}}>\n        <div className=\"media-body\">\n          <h5 className=\"mt-0\">{medal} {name}</h5>\n          <p className=\"mb-0\">\n            {result.c_EventGender} { result.c_Sportname}, {result.c_CompetitionName}<br/>\n            <small className=\"text-muted\">\n              {result.c_PhaseCity} {result.c_PhaseCountry}<br/>\n              {formattedDate}\n            </small>\n          </p>\n\n        </div>\n      </div>\n    )\n  }\n}\n\nexport default AthleteCard;","import React, { Component } from 'react'\nimport {format, parse} from 'date-fns'\nimport './AthleteDetailCard.scss'\n\nclass AthleteDetailCard extends Component {\n  render() {\n    const { selectedResult, onClick } = this.props\n    const formattedDate = format(parse(selectedResult.d_PhaseDate), 'D MMMM YYYY')\n    const name = selectedResult.c_Person === null ? `Team ${selectedResult.c_Team}` : selectedResult.c_Person\n    const medal = selectedResult.n_RankMedal === 1 ? \"🥇\" : (selectedResult.n_RankMedal === 2 ? \"🥈\" : (selectedResult.n_RankMedal === 3 ? \"🥉\" : selectedResult.n_RankMedal))\n    const result = selectedResult.c_Result !== null ? (<div><dt>Result ({selectedResult.c_ResultType})</dt><dd>{selectedResult.c_Result}</dd></div>) : null\n    return (\n      <div className=\"athlete--detail--card media rounded mb-3 p-3 pb-0\" onClick={e => {e.preventDefault();onClick();}}>\n        <div className=\"media-body\">\n          <h3 className=\"my-3\"><i className=\"material-icons md-48\">navigate_before</i> {name}</h3>\n          <dl>\n            <dt>Rank</dt>\n            <dd className=\"display-4\">{medal}</dd>\n            <dt>Sport</dt>\n            <dd>{selectedResult.c_EventGender} { selectedResult.c_Sportname}</dd>\n            <dt>Date</dt>\n            <dd>{formattedDate} {selectedResult.n_PersonAgeYears ? `(${selectedResult.n_PersonAgeYears} years old)` : ''}</dd>\n            <dt>Competition</dt>\n            <dd>{selectedResult.c_CompetitionName}</dd>\n            <dt>Location</dt>\n            <dd>{selectedResult.c_PhaseCity} {selectedResult.c_PhaseCountry}</dd>\n            {result}\n          </dl>\n        </div>\n      </div>\n    )\n  }\n}\n\nexport default AthleteDetailCard","import React, { Component } from 'react'\nimport AthleteFilters from './AthleteFilters'\nimport AthleteCard from './AthleteCard'\nimport AthleteDetailCard from './AthleteDetailCard'\nimport './AthleteList.scss'\n\nclass AthleteList extends Component {\n  constructor(props) {\n    super(props)\n    this.state = {\n      showFilters: false,\n      showSort: false\n    }\n\n    this.toggleFilters = this.toggleFilters.bind(this)\n  }\n\n  toggleFilters() {\n    return this.setState({ showFilters: !this.state.showFilters })\n  }\n\n  onClickAthleteCard(result) {\n    const { onSelectResult } = this.props\n    return onSelectResult(result)\n  }\n\n  onCloseDetail() {\n    const { onUnselectResult } = this.props\n    return onUnselectResult()\n  }\n\n  render() {\n    const _this = this\n    const { selectedResult, globeStatus, filterOptions, setFilters, phaseResults } = this.props\n    const filteredResults = phaseResults.filtered\n    const poiResults = phaseResults.poi\n    const cardSource = poiResults.length > 0 ? poiResults : filteredResults\n    const athleteCards = cardSource.map( r => <AthleteCard key={r.n_PhaseResultID} result={r} onClick={() => _this.onClickAthleteCard(r)} /> )\n\n    const heading = cardSource.length > 0 ? `Found ${cardSource.length} medalists` : 'No medalist found'\n\n    const cssClass = globeStatus.viewDetails ? 'athlete--list--container athlete--list--container__detailed' : 'athlete--list--container'\n    return (\n      <div className={cssClass} id=\"athlete-list\">\n        <div className=\"athlete--list p-3\">\n          <div className=\"clearfix\">\n            <button onClick={this.toggleFilters} className=\"float-right btn btn-link text-dark\" title=\"Filters\">\n              <i className=\"material-icons md-48\">filter_list</i>\n            </button>\n            <h1>Aussie medalists</h1>\n          </div>\n          { this.state.showFilters ? <AthleteFilters filterOptions={filterOptions} setFilters={setFilters} phaseResults={phaseResults} /> : null }\n\n          <h4 className=\"my-3\">{heading}</h4>\n          {athleteCards}\n        </div>\n        <AthleteDetailCard selectedResult={selectedResult} onClick={() => _this.onCloseDetail()} />\n      </div>\n    );\n  }\n}\n\nexport default AthleteList","import React, { Component } from 'react'\nimport Globe from './Globe/Globe'\nimport AthleteList from './AthleteList/AthleteList'\nimport '../vendors/stylesheets/bootstrap/bootstrap.scss'\nimport './App.scss'\n\nclass App extends Component {\n  constructor(props) {\n    super(props)\n    this.state = {\n      loaded: false\n    }\n  }\n\n  componentDidMount() {\n    if (this.state.loaded === false) {\n      this.props.fetchGraceNoteData()\n      this.setState({ loaded: true })\n    }\n  }\n\n  render() {\n    const { phaseResults, selectedResult, onSelectResult, onUnselectResult, setPOI, unsetPOI, globeStatus, filterOptions, setFilters } = this.props\n    return (\n      <div className=\"container-fluid p-0\">\n        <div className=\"row no-gutters\">\n          <div className=\"col-lg-8\">\n            <Globe\n              phaseResults={phaseResults}\n              selectedResult={selectedResult}\n              globeStatus={globeStatus}\n              setPOI={setPOI}\n              unsetPOI={unsetPOI}\n              />\n          </div>\n          <div className=\"col-lg-4\">\n            <AthleteList\n              phaseResults={phaseResults}\n              selectedResult={selectedResult}\n              onSelectResult={onSelectResult}\n              onUnselectResult={onUnselectResult}\n              globeStatus={globeStatus}\n              filterOptions={filterOptions}\n              setFilters={setFilters}\n              />\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default App;\n","import { connect } from 'react-redux';\nimport { fetchGraceNoteData, selectResult, setPOI, unsetPOI, unselectResult, setFilters } from '../actions';\nimport App from '../components/App';\n\nconst mapStateToProps = state => {\n  return {\n    phaseResults: state.phaseResults,\n    selectedResult: state.selectedResult,\n    globeStatus: state.globeStatus,\n    filterOptions: state.filterOptions\n  };\n};\n\nconst mapDispatchToProps = dispatch => {\n  return {\n    fetchGraceNoteData: () => {\n      dispatch(fetchGraceNoteData());\n    },\n    onSelectResult: result => {\n      dispatch(selectResult(result))\n    },\n    onUnselectResult: () => {\n      dispatch(unselectResult())\n    },\n    setPOI: (lat, lng) => {\n      dispatch(setPOI(lat, lng))\n    },\n    unsetPOI: () => {\n      dispatch(unsetPOI())\n    },\n    setFilters: (newFilterValues) => {\n      dispatch(setFilters(newFilterValues))\n    }\n  };\n};\n\nconst AppContainer = connect(\n  mapStateToProps,\n  mapDispatchToProps\n)(App);\n\nexport default AppContainer;\n","import fetch from 'isomorphic-fetch'\nimport * as types from '../constants/ActionTypes'\nimport countries from '../assets/data/countries.json'\nimport cities from 'cities.json'\n\nexport const requestGraceNoteData = () => ({\n  type: types.REQUEST_GRACENOTE_DATA,\n})\n\nexport const receiveGraceNoteData = (json) => ({\n  type: types.RECEIVE_GRACENOTE_DATA,\n  json\n})\n\nexport const fetchGraceNoteData = () => {\n  const requestUrl = `https://another-quang.github.io/build/assets/phaseresults.json`;\n  return dispatch => {\n    // dispatch(requestGraceNoteData());\n    return fetch(requestUrl)\n      .then(response => {\n        return response.json()\n      })\n      .then(json => {\n        const results = [];\n        if (json.length > 5) {\n          const subset = json.slice(0, 100)\n          subset.forEach(r => {\n            let geojson = cities.find(c => c.name === r.c_PhaseCity)\n            if (typeof(geojson) === 'undefined') {\n              // console.log(r)\n              geojson = countries.find(c => c.Country === r.c_PhaseCountry)\n            }\n            // const geojson = countries.find(c => c.Country === r.c_PhaseCountry)\n            results.push(Object.assign({}, r, { geojson: geojson }));\n          })\n        }\n        dispatch(receiveGraceNoteData(results))\n      })\n  }\n}\n\nexport const selectResult = selectedResult => ({\n  type: types.SELECT_RESULT,\n  selectedResult\n})\n\nexport const unselectResult = selectedResult => ({\n  type: types.UNSELECT_RESULT,\n  selectedResult\n})\n\nexport const setPOI = (lat, lng) => ({\n  type: types.SET_POI,\n  lat,\n  lng\n})\n\nexport const unsetPOI = () => ({\n  type: types.UNSET_POI\n})\n\nexport const setFilters = (newFilterValues) => ({\n  type: types.SET_FILTER,\n  newFilterValues\n})","export const REQUEST_GRACENOTE_DATA = 'REQUEST_GRACENOTE_DATA'\nexport const RECEIVE_GRACENOTE_DATA = 'RECEIVE_GRACENOTE_DATA'\nexport const SELECT_RESULT = 'SELECT_RESULT'\nexport const UNSELECT_RESULT = 'UNSELECT_RESULT'\nexport const SET_POI = 'SET_POI'\nexport const UNSET_POI = 'UNSET_POI'\nexport const SET_FILTER = 'SET_FILTER'\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read http://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit http://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See http://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import { RECEIVE_GRACENOTE_DATA, SET_POI, UNSET_POI, SET_FILTER } from '../constants/ActionTypes'\n\nconst initialState = {\n  all: [], // Everything\n  filtered: [], // Filtered\n  poi: [] // Near POI\n}\n\nconst phaseResults = (state = initialState, action) => {\n  switch (action.type) {\n    case RECEIVE_GRACENOTE_DATA: {\n      return Object.assign({}, state, { all: action.json, filtered: action.json })\n    }\n\n    case SET_POI: {\n      const distanceThreshold = 10\n      const copyState = []\n\n      state.filtered.forEach(x => {\n        const a = x.geojson.lat - action.lat\n        const b = x.geojson.lng - action.lng\n        copyState.push(Object.assign({}, x, { distance: Math.sqrt(a * a + b * b) }))\n      })\n\n      const results = copyState.filter(x => x.distance < distanceThreshold).sort((a, b) => (a.distance > b.distance) ? 1 : ((b.distance > a.distance) ? -1 : 0))\n      return Object.assign({}, state, { poi: results })\n    }\n\n    case UNSET_POI: {\n      return Object.assign({}, state, { poi: [] })\n    }\n\n    case SET_FILTER: {\n      const ignoreSportName = action.newFilterValues.sport === 'All' ? true : false\n      const ignoreGender = action.newFilterValues.gender === 'All' ? true : false\n      const ignoreMedal = action.newFilterValues.medal === 'All' ? true : false\n      const ignoreName = action.newFilterValues.name === '' ? true : false\n\n      return Object.assign({}, state, {\n        poi: [],\n        filtered: state.all.filter(x => {\n          return (x.c_Sportname === action.newFilterValues.sport || ignoreSportName)\n            && (x.c_EventGender === action.newFilterValues.gender || ignoreGender)\n            && (x.n_RankMedal === parseInt(action.newFilterValues.medal, 10) || ignoreMedal)\n            && ((x.c_Person !== null ? x.c_Person.toUpperCase().includes(action.newFilterValues.name.toUpperCase()) : false) || ignoreName)\n        })\n      })\n    }\n    default:\n      return state\n  }\n};\n\nexport default phaseResults\n","import { SELECT_RESULT } from '../constants/ActionTypes'\n\nconst initialState = {}\n\nconst selectedResult = (state = initialState, action) => {\n  switch (action.type) {\n    case SELECT_RESULT: {\n      return Object.assign({}, state, action.selectedResult)\n    }\n    default:\n      return state\n  }\n};\n\nexport default selectedResult\n","import { SELECT_RESULT, UNSELECT_RESULT } from '../constants/ActionTypes'\n\nconst initialState = {\n  viewDetails: false\n}\n\nconst globeStatus = (state = initialState, action) => {\n  switch (action.type) {\n    case SELECT_RESULT: {\n      return Object.assign({}, state, { viewDetails: true })\n    }\n    case UNSELECT_RESULT: {\n      return Object.assign({}, state, { viewDetails: false })\n    }\n    default:\n      return state\n  }\n};\n\nexport default globeStatus\n","import { RECEIVE_GRACENOTE_DATA } from '../constants/ActionTypes'\n\nconst initialState = {\n  sport: [],\n  gender: [],\n  medal: [],\n}\n\nconst uniq = (array) => {\n  return [...new Set(array)]\n}\n\nconst getAvailableFields = (results, fieldName) => {\n  if (results.length > 0) {\n    const temp = uniq(results.map(x => x[fieldName])).sort()\n    temp.unshift('All')\n    return temp\n  }\n}\n\nconst filterOptions = (state = initialState, action) => {\n  switch (action.type) {\n    case RECEIVE_GRACENOTE_DATA: {\n      return Object.assign({}, state, {\n        sport: getAvailableFields(action.json, 'c_Sportname'),\n        gender: getAvailableFields(action.json, 'c_EventGender'),\n        medal: getAvailableFields(action.json, 'n_RankMedal'),\n      })\n    }\n\n    default:\n      return state\n  }\n};\n\nexport default filterOptions\n","import { combineReducers } from 'redux'\nimport phaseResults from './phaseResults'\nimport selectedResult from './selectedResult'\nimport globeStatus from './globeStatus'\nimport filterOptions from './filterOptions'\n\nconst rootReducer = combineReducers({\n  phaseResults,\n  selectedResult,\n  globeStatus,\n  filterOptions\n});\n\nexport default rootReducer;\n","import { applyMiddleware, createStore } from 'redux';\nimport thunk from 'redux-thunk';\nimport promise from 'redux-promise';\nimport { createLogger } from 'redux-logger';\nimport rootReducer from '../reducers';\n\nconst middlewares = process.env.NODE_ENV === 'production' ? [thunk, promise] : [thunk, promise, createLogger()];\n\nexport default function configureStore(initialState) {\n  const store = createStore(\n    rootReducer,\n    initialState,\n    applyMiddleware(...middlewares)\n  );\n\n  return store;\n}\n","import React from 'react';\nimport { render } from 'react-dom';\nimport AppContainer from './containers/AppContainer';\nimport * as serviceWorker from './serviceWorker';\nimport { Provider } from 'react-redux';\nimport configureStore from './store/configureStore';\n\nlet initialState = {};\nconst store = configureStore(initialState);\nrender(\n  <Provider store={store}>\n    <AppContainer />\n  </Provider>,\n  document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: http://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}